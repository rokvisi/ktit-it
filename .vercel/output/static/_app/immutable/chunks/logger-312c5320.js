class L{constructor(){this.listeners=[]}subscribe(e){const n=e||(()=>{});return this.listeners.push(n),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(s=>s!==n),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const g=typeof window>"u";function V(){}function z(t,e){return typeof t=="function"?t(e):t}function B(t){return typeof t=="number"&&t>=0&&t!==1/0}function m(t){return Array.isArray(t)?t:[t]}function J(t,e){return t.filter(n=>e.indexOf(n)===-1)}function G(t,e,n){const s=t.slice(0);return s[e]=n,s}function W(t,e){return Math.max(t+(e||0)-Date.now(),0)}function X(t,e,n){return p(t)?typeof e=="function"?Object.assign(Object.assign({},n),{queryKey:t,queryFn:e}):Object.assign(Object.assign({},e),{queryKey:t}):t}function Y(t,e,n){return p(t)?[Object.assign(Object.assign({},e),{queryKey:t}),n]:[t||{},e]}function _(t,e){return t===!0&&e===!0||t==null&&e==null?"all":t===!1&&e===!1?"none":(t!=null?t:!e)?"active":"inactive"}function Z(t,e){const{active:n,exact:s,fetching:i,inactive:l,predicate:c,queryKey:f,stale:a}=t;if(p(f)){if(s){if(e.queryHash!==q(f,e.options))return!1}else if(!R(e.queryKey,f))return!1}const u=_(n,l);if(u==="none")return!1;if(u!=="all"){const d=e.isActive();if(u==="active"&&!d||u==="inactive"&&d)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i=="boolean"&&e.isFetching()!==i||c&&!c(e))}function $(t,e){const{exact:n,fetching:s,predicate:i,mutationKey:l}=t;if(p(l)){if(!e.options.mutationKey)return!1;if(n){if(O(e.options.mutationKey)!==O(l))return!1}else if(!R(e.options.mutationKey,l))return!1}return!(typeof s=="boolean"&&e.state.status==="loading"!==s||i&&!i(e))}function q(t,e){return((e==null?void 0:e.queryKeyHashFn)||O)(t)}function O(t){const e=m(t);return M(e)}function M(t){return JSON.stringify(t,(e,n)=>F(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function R(t,e){return S(m(t),m(e))}function S(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!S(t[n],e[n])):!1}function x(t,e){if(t===e)return t;const n=Array.isArray(t)&&Array.isArray(e);if(n||F(t)&&F(e)){const s=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),l=i.length,c=n?[]:{};let f=0;for(let a=0;a<l;a++){const u=n?a:i[a];c[u]=x(t[u],e[u]),c[u]===t[u]&&f++}return s===l&&f===s?t:c}return e}function ee(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function F(t){if(!E(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!E(n)||!n.hasOwnProperty("isPrototypeOf"))}function E(t){return Object.prototype.toString.call(t)==="[object Object]"}function p(t){return typeof t=="string"||Array.isArray(t)}function N(t){return new Promise(e=>{setTimeout(e,t)})}function j(t){Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function te(){if(typeof AbortController=="function")return new AbortController}class Q extends L{constructor(){super(),this.setup=e=>{if(!g&&(window==null?void 0:window.addEventListener)){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||((e=this.cleanup)===null||e===void 0||e.call(this),this.cleanup=void 0)}setEventListener(e){var n;this.setup=e,(n=this.cleanup)===null||n===void 0||n.call(this),this.cleanup=e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(e){this.focused=e,e&&this.onFocus()}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const k=new Q;class D extends L{constructor(){super(),this.setup=e=>{if(!g&&(window==null?void 0:window.addEventListener)){const n=()=>e();return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||((e=this.cleanup)===null||e===void 0||e.call(this),this.cleanup=void 0)}setEventListener(e){var n;this.setup=e,(n=this.cleanup)===null||n===void 0||n.call(this),this.cleanup=e(s=>{typeof s=="boolean"?this.setOnline(s):this.onOnline()})}setOnline(e){this.online=e,e&&this.onOnline()}onOnline(){this.listeners.forEach(e=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const U=new D;function T(t){return Math.min(1e3*2**t,3e4)}function A(t){return typeof(t==null?void 0:t.cancel)=="function"}class C{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function ne(t){return t instanceof C}class se{constructor(e){let n=!1,s,i,l,c;this.abort=e.abort,this.cancel=o=>s==null?void 0:s(o),this.cancelRetry=()=>{n=!0},this.continueRetry=()=>{n=!1},this.continue=()=>i==null?void 0:i(),this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise((o,r)=>{l=o,c=r});const f=o=>{var r;this.isResolved||(this.isResolved=!0,(r=e.onSuccess)===null||r===void 0||r.call(e,o),i==null||i(),l(o))},a=o=>{var r;this.isResolved||(this.isResolved=!0,(r=e.onError)===null||r===void 0||r.call(e,o),i==null||i(),c(o))},u=()=>new Promise(o=>{var r;i=o,this.isPaused=!0,(r=e.onPause)===null||r===void 0||r.call(e)}).then(()=>{var o;i=void 0,this.isPaused=!1,(o=e.onContinue)===null||o===void 0||o.call(e)}),d=()=>{if(this.isResolved)return;let o;try{o=e.fn()}catch(r){o=Promise.reject(r)}s=r=>{var h;if(!this.isResolved&&(a(new C(r)),(h=this.abort)===null||h===void 0||h.call(this),A(o)))try{o.cancel()}catch{}},this.isTransportCancelable=A(o),Promise.resolve(o).then(f).catch(r=>{var h,v,b;if(this.isResolved)return;const y=(h=e.retry)!==null&&h!==void 0?h:3,w=(v=e.retryDelay)!==null&&v!==void 0?v:T,K=typeof w=="function"?w(this.failureCount,r):w,P=y===!0||typeof y=="number"&&this.failureCount<y||typeof y=="function"&&y(this.failureCount,r);if(n||!P){a(r);return}this.failureCount++,(b=e.onFail)===null||b===void 0||b.call(e,this.failureCount,r),N(K).then(()=>{if(!k.isFocused()||!U.isOnline())return u()}).then(()=>{n?a(r):d()})})};d()}}class H{constructor(){this.queue=[],this.transactions=0,this.notifyFn=e=>{e()},this.batchNotifyFn=e=>{e()}}batch(e){let n;this.transactions++;try{n=e()}finally{this.transactions--,this.transactions||this.flush()}return n}schedule(e){this.transactions?this.queue.push(e):j(()=>{this.notifyFn(e)})}batchCalls(e){return(...n)=>{this.schedule(()=>{e(...n)})}}flush(){const e=this.queue;this.queue=[],e.length&&j(()=>{this.batchNotifyFn(()=>{e.forEach(n=>{this.notifyFn(n)})})})}setNotifyFunction(e){this.notifyFn=e}setBatchNotifyFunction(e){this.batchNotifyFn=e}}const ie=new H;let I=console;function re(){return I}export{se as R,L as S,ne as a,re as b,ie as c,$ as d,m as e,z as f,te as g,q as h,B as i,A as j,k,X as l,Z as m,V as n,U as o,Y as p,O as q,x as r,R as s,W as t,g as u,ee as v,J as w,G as x};
