import{S as ie,i as ce,s as ue,k as S,l as $,m as I,h as y,n as k,b as H,a8 as fe,d as oe,f as F,t as J,q as p,a as C,r as m,c as Y,a1 as ne,D as c,u as G,g as se,a9 as _e,v as de,w as pe,x as me,y as he,A as re}from"../../../../chunks/index-055277d2.js";import{A as ge}from"../../../../chunks/ActionButton-d85b6509.js";function L(r,e){if(e.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+e.length+" present")}function B(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(t){return typeof t}:B=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(r)}function Z(r){L(1,arguments);var e=Object.prototype.toString.call(r);return r instanceof Date||B(r)==="object"&&e==="[object Date]"?new Date(r.getTime()):typeof r=="number"||e==="[object Number]"?new Date(r):((typeof r=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function K(r){L(1,arguments);var e=Z(r),t=e.getDate();return t}function U(r){L(1,arguments);var e=Z(r),t=e.getMonth();return t}function z(r){return L(1,arguments),Z(r).getFullYear()}function ae(r,e,t){const o=r.slice();return o[4]=e[t],o}function be(r){let e,t;function o(){return r[3](r[4])}return e=new ge({props:{class:"w-full",onClick:o,$$slots:{default:[ye]},$$scope:{ctx:r}}}),{c(){de(e.$$.fragment)},l(l){pe(e.$$.fragment,l)},m(l,s){me(e,l,s),t=!0},p(l,s){r=l;const f={};s&1&&(f.onClick=o),s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){J(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function ve(r){let e,t,o=z(r[4].end_time)+"",l,s,f=U(r[4].end_time)+"",n,a,i=K(r[4].end_time)+"",h;return{c(){e=S("p"),t=p("Gr\u0105\u017Einta: "),l=p(o),s=p("/"),n=p(f),a=p("/"),h=p(i),this.h()},l(u){e=$(u,"P",{class:!0});var d=I(e);t=m(d,"Gr\u0105\u017Einta: "),l=m(d,o),s=m(d,"/"),n=m(d,f),a=m(d,"/"),h=m(d,i),d.forEach(y),this.h()},h(){k(e,"class","text-center bg-green-300 rounded shadow border py-2 px-4")},m(u,d){H(u,e,d),c(e,t),c(e,l),c(e,s),c(e,n),c(e,a),c(e,h)},p(u,d){d&1&&o!==(o=z(u[4].end_time)+"")&&G(l,o),d&1&&f!==(f=U(u[4].end_time)+"")&&G(n,f),d&1&&i!==(i=K(u[4].end_time)+"")&&G(h,i)},i:re,o:re,d(u){u&&y(e)}}}function ye(r){let e;return{c(){e=p("Gr\u0105\u017Einti")},l(t){e=m(t,"Gr\u0105\u017Einti")},m(t,o){H(t,e,o)},d(t){t&&y(e)}}}function le(r,e){let t,o,l=e[4].name+"",s,f,n,a,i,h,u,d,q=z(e[4].start_time)+"",O,Q,A=U(e[4].start_time)+"",T,R,N=K(e[4].start_time)+"",V,W,P,g,b,X,w;const x=[ve,be],D=[];function ee(v,_){return v[4].end_time?0:1}return g=ee(e),b=D[g]=x[g](e),{key:r,first:null,c(){t=S("div"),o=S("p"),s=p(l),f=C(),n=S("img"),i=C(),h=S("div"),u=S("p"),d=p("I\u0161nuomota: "),O=p(q),Q=p("/"),T=p(A),R=p("/"),V=p(N),W=C(),P=S("div"),b.c(),X=C(),this.h()},l(v){t=$(v,"DIV",{class:!0});var _=I(t);o=$(_,"P",{class:!0});var M=I(o);s=m(M,l),M.forEach(y),f=Y(_),n=$(_,"IMG",{src:!0,alt:!0,class:!0}),i=Y(_),h=$(_,"DIV",{class:!0});var j=I(h);u=$(j,"P",{class:!0});var E=I(u);d=m(E,"I\u0161nuomota: "),O=m(E,q),Q=m(E,"/"),T=m(E,A),R=m(E,"/"),V=m(E,N),E.forEach(y),W=Y(j),P=$(j,"DIV",{});var te=I(P);b.l(te),te.forEach(y),j.forEach(y),X=Y(_),_.forEach(y),this.h()},h(){k(o,"class","grow text-lg"),ne(n.src,a=e[4].url)||k(n,"src",a),k(n,"alt","nuotrauka"),k(n,"class","w-40 aspect-square p-4 rounded border"),k(u,"class","text-center bg-blue-300 rounded shadow border py-2 px-4"),k(h,"class","flex flex-col justify-between shrink"),k(t,"class","flex gap-4 p-4 shadow border"),this.first=t},m(v,_){H(v,t,_),c(t,o),c(o,s),c(t,f),c(t,n),c(t,i),c(t,h),c(h,u),c(u,d),c(u,O),c(u,Q),c(u,T),c(u,R),c(u,V),c(h,W),c(h,P),D[g].m(P,null),c(t,X),w=!0},p(v,_){e=v,(!w||_&1)&&l!==(l=e[4].name+"")&&G(s,l),(!w||_&1&&!ne(n.src,a=e[4].url))&&k(n,"src",a),(!w||_&1)&&q!==(q=z(e[4].start_time)+"")&&G(O,q),(!w||_&1)&&A!==(A=U(e[4].start_time)+"")&&G(T,A),(!w||_&1)&&N!==(N=K(e[4].start_time)+"")&&G(V,N);let M=g;g=ee(e),g===M?D[g].p(e,_):(se(),J(D[M],1,1,()=>{D[M]=null}),oe(),b=D[g],b?b.p(e,_):(b=D[g]=x[g](e),b.c()),F(b,1),b.m(P,null))},i(v){w||(F(b),w=!0)},o(v){J(b),w=!1},d(v){v&&y(t),D[g].d()}}}function ke(r){let e,t=[],o=new Map,l,s=r[0];const f=n=>n[4].id;for(let n=0;n<s.length;n+=1){let a=ae(r,s,n),i=f(a);o.set(i,t[n]=le(i,a))}return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var a=I(e);for(let i=0;i<t.length;i+=1)t[i].l(a);a.forEach(y),this.h()},h(){k(e,"class","flex flex-col gap-8")},m(n,a){H(n,e,a);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(n,[a]){a&3&&(s=n[0],se(),t=fe(t,a,f,1,n,s,o,e,_e,le,null,ae),oe())},i(n){if(!l){for(let a=0;a<s.length;a+=1)F(t[a]);l=!0}},o(n){for(let a=0;a<t.length;a+=1)J(t[a]);l=!1},d(n){n&&y(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function we(r,e,t){let{data:o}=e,l=o.contracts;async function s(n){return(await fetch("/api/db/contracts",{method:"PUT",body:JSON.stringify({contractId:n})})).ok?(setTimeout(()=>{l.find(i=>i.id===n).end_time=new Date,t(0,l)},3e3),{state:"success",text:"Gr\u0105\u017Einta!"}):{state:"error",text:"Klaida!"}}const f=n=>s(n.id);return r.$$set=n=>{"data"in n&&t(2,o=n.data)},[l,s,o,f]}class $e extends ie{constructor(e){super(),ce(this,e,we,ke,ue,{data:2})}}export{$e as default};
