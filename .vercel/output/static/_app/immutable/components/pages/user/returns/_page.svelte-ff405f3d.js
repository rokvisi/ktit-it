import{S as ce,i as ue,s as fe,k as D,a as O,l as S,m as E,c as T,h,n as k,b as V,D as u,a8 as _e,d as se,f as J,t as K,q as p,r as m,a1 as ne,u as G,g as ie,a9 as de,v as pe,w as me,x as he,y as ge,A as re}from"../../../../chunks/index-055277d2.js";import{A as be}from"../../../../chunks/ActionButton-d85b6509.js";function L(r,e){if(e.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+e.length+" present")}function F(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?F=function(t){return typeof t}:F=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(r)}function Z(r){L(1,arguments);var e=Object.prototype.toString.call(r);return r instanceof Date||F(r)==="object"&&e==="[object Date]"?new Date(r.getTime()):typeof r=="number"||e==="[object Number]"?new Date(r):((typeof r=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function U(r){L(1,arguments);var e=Z(r),t=e.getDate();return t}function z(r){L(1,arguments);var e=Z(r),t=e.getMonth();return t}function H(r){return L(1,arguments),Z(r).getFullYear()}function ae(r,e,t){const n=r.slice();return n[4]=e[t],n}function le(r){let e,t;return{c(){e=D("p"),t=p("I\u0161sinuomot\u0173 daikt\u0173 n\u0117ra!")},l(n){e=S(n,"P",{});var l=E(e);t=m(l,"I\u0161sinuomot\u0173 daikt\u0173 n\u0117ra!"),l.forEach(h)},m(n,l){V(n,e,l),u(e,t)},d(n){n&&h(e)}}}function ve(r){let e,t;function n(){return r[3](r[4])}return e=new be({props:{class:"w-full",onClick:n,$$slots:{default:[ke]},$$scope:{ctx:r}}}),{c(){pe(e.$$.fragment)},l(l){me(e.$$.fragment,l)},m(l,f){he(e,l,f),t=!0},p(l,f){r=l;const i={};f&1&&(i.onClick=n),f&128&&(i.$$scope={dirty:f,ctx:r}),e.$set(i)},i(l){t||(J(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function ye(r){let e,t,n=H(r[4].end_time)+"",l,f,i=z(r[4].end_time)+"",c,g,o=U(r[4].end_time)+"",a;return{c(){e=D("p"),t=p("Gr\u0105\u017Einta: "),l=p(n),f=p("/"),c=p(i),g=p("/"),a=p(o),this.h()},l(s){e=S(s,"P",{class:!0});var d=E(e);t=m(d,"Gr\u0105\u017Einta: "),l=m(d,n),f=m(d,"/"),c=m(d,i),g=m(d,"/"),a=m(d,o),d.forEach(h),this.h()},h(){k(e,"class","text-center bg-green-300 rounded shadow border py-2 px-4")},m(s,d){V(s,e,d),u(e,t),u(e,l),u(e,f),u(e,c),u(e,g),u(e,a)},p(s,d){d&1&&n!==(n=H(s[4].end_time)+"")&&G(l,n),d&1&&i!==(i=z(s[4].end_time)+"")&&G(c,i),d&1&&o!==(o=U(s[4].end_time)+"")&&G(a,o)},i:re,o:re,d(s){s&&h(e)}}}function ke(r){let e;return{c(){e=p("Gr\u0105\u017Einti")},l(t){e=m(t,"Gr\u0105\u017Einti")},m(t,n){V(t,e,n)},d(t){t&&h(e)}}}function oe(r,e){let t,n,l=e[4].name+"",f,i,c,g,o,a,s,d,q=H(e[4].start_time)+"",j,Q,A=z(e[4].start_time)+"",C,R,N=U(e[4].start_time)+"",Y,W,P,b,v,X,w;const x=[ye,ve],$=[];function ee(y,_){return y[4].end_time?0:1}return b=ee(e),v=$[b]=x[b](e),{key:r,first:null,c(){t=D("div"),n=D("p"),f=p(l),i=O(),c=D("img"),o=O(),a=D("div"),s=D("p"),d=p("I\u0161nuomota: "),j=p(q),Q=p("/"),C=p(A),R=p("/"),Y=p(N),W=O(),P=D("div"),v.c(),X=O(),this.h()},l(y){t=S(y,"DIV",{class:!0});var _=E(t);n=S(_,"P",{class:!0});var M=E(n);f=m(M,l),M.forEach(h),i=T(_),c=S(_,"IMG",{src:!0,alt:!0,class:!0}),o=T(_),a=S(_,"DIV",{class:!0});var B=E(a);s=S(B,"P",{class:!0});var I=E(s);d=m(I,"I\u0161nuomota: "),j=m(I,q),Q=m(I,"/"),C=m(I,A),R=m(I,"/"),Y=m(I,N),I.forEach(h),W=T(B),P=S(B,"DIV",{});var te=E(P);v.l(te),te.forEach(h),B.forEach(h),X=T(_),_.forEach(h),this.h()},h(){k(n,"class","grow text-lg"),ne(c.src,g=e[4].url)||k(c,"src",g),k(c,"alt","nuotrauka"),k(c,"class","w-40 aspect-square p-4 rounded border"),k(s,"class","text-center bg-blue-300 rounded shadow border py-2 px-4"),k(a,"class","flex flex-col justify-between shrink"),k(t,"class","flex gap-4 p-4 shadow border"),this.first=t},m(y,_){V(y,t,_),u(t,n),u(n,f),u(t,i),u(t,c),u(t,o),u(t,a),u(a,s),u(s,d),u(s,j),u(s,Q),u(s,C),u(s,R),u(s,Y),u(a,W),u(a,P),$[b].m(P,null),u(t,X),w=!0},p(y,_){e=y,(!w||_&1)&&l!==(l=e[4].name+"")&&G(f,l),(!w||_&1&&!ne(c.src,g=e[4].url))&&k(c,"src",g),(!w||_&1)&&q!==(q=H(e[4].start_time)+"")&&G(j,q),(!w||_&1)&&A!==(A=z(e[4].start_time)+"")&&G(C,A),(!w||_&1)&&N!==(N=U(e[4].start_time)+"")&&G(Y,N);let M=b;b=ee(e),b===M?$[b].p(e,_):(ie(),K($[M],1,1,()=>{$[M]=null}),se(),v=$[b],v?v.p(e,_):(v=$[b]=x[b](e),v.c()),J(v,1),v.m(P,null))},i(y){w||(J(v),w=!0)},o(y){K(v),w=!1},d(y){y&&h(t),$[b].d()}}}function we(r){let e,t,n=[],l=new Map,f,i=r[0].length===0&&le(),c=r[0];const g=o=>o[4].id;for(let o=0;o<c.length;o+=1){let a=ae(r,c,o),s=g(a);l.set(s,n[o]=oe(s,a))}return{c(){e=D("div"),i&&i.c(),t=O();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=S(o,"DIV",{class:!0});var a=E(e);i&&i.l(a),t=T(a);for(let s=0;s<n.length;s+=1)n[s].l(a);a.forEach(h),this.h()},h(){k(e,"class","flex flex-col gap-8")},m(o,a){V(o,e,a),i&&i.m(e,null),u(e,t);for(let s=0;s<n.length;s+=1)n[s].m(e,null);f=!0},p(o,[a]){o[0].length===0?i||(i=le(),i.c(),i.m(e,t)):i&&(i.d(1),i=null),a&3&&(c=o[0],ie(),n=_e(n,a,g,1,o,c,l,e,de,oe,null,ae),se())},i(o){if(!f){for(let a=0;a<c.length;a+=1)J(n[a]);f=!0}},o(o){for(let a=0;a<n.length;a+=1)K(n[a]);f=!1},d(o){o&&h(e),i&&i.d();for(let a=0;a<n.length;a+=1)n[a].d()}}}function De(r,e,t){let{data:n}=e,l=n.contracts;async function f(c){return(await fetch("/api/db/contracts",{method:"PUT",body:JSON.stringify({contractId:c})})).ok?(setTimeout(()=>{l.find(o=>o.id===c).end_time=new Date,t(0,l)},3e3),{state:"success",text:"Gr\u0105\u017Einta!"}):{state:"error",text:"Klaida!"}}const i=c=>f(c.id);return r.$$set=c=>{"data"in c&&t(2,n=c.data)},[l,f,n,i]}class Ee extends ce{constructor(e){super(),ue(this,e,De,we,fe,{data:2})}}export{Ee as default};
